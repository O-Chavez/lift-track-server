(this["webpackJsonplift-tracker"]=this["webpackJsonplift-tracker"]||[]).push([[0],{197:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),s=n.n(a),r=n(14),i=n.n(r),o=n(4),l=n.n(o),u=n(9),d=n(2),j=n(8),b=n(5),h=n(70),p=n(71);function x(){var e=Object(h.a)(["\nhtml, body, #root, .App {\n  position: relative;\n  height: 100%;\n  // width: 100%\n  // margin: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.page {\n  // height: 100%;\n  position: absolute;\n  // top: 65px;\n  left: 0;\n  right: 0\n  // display: flex;\n  // flex-direction: column;\n}\n\n// .collapsed {\n//   // display: none;\n//   overflow: hidden;\n//   tranisition: max-height 3.9s ease;\n// }\n\n.fade-appear,\n.fade-enter {\n  position: absolute;\n  opacity: 0;\n  z-indez: 10;\n  width: 100%;\n}\n.fade-appear-active,\n.fade-enter.fade-enter-active {\n  opacity: 1;\n  // position: absolute;\n  transition: opacity 300ms linear 150ms;\n\n}\n\n.fade-exit {\n  opacity: 1;\n  position: absolute;\n  width: 100%\n}\n.fade-exit.fade-exit-active {\n  opacity: 0;\n  // position: absolute;\n  transition: opacity 150ms linear;\n}\n\ncanvas {\n  height: 100%;\n  display: flex;\n}\n\nbody {\n  background-color: #f7f7f7\n}\n\nh2 {\n  font-weight: 600\n}\n\nh5 {\n  font-weight: 500\n}\n"]);return x=function(){return e},e}var f=Object(p.a)(x()),O="https://the-lift-tracker.herokuapp.com",m=s.a.createContext(null),g=function(e){for(var t=e.postsPerPage,n=e.totalPosts,a=e.paginate,s=[],r=1;r<=Math.ceil(n/t);r++)s.push(r);return Object(c.jsx)("nav",{children:Object(c.jsx)("ul",{className:"pagination ml-1 mt-3",children:s.map((function(e){return Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("button",{onClick:function(){return a(e)},href:"!#",className:"page-link bg-dark text-white",children:e})},e)}))})})},v=n(6),k=n.n(v);function N(){var e=Object(a.useContext)(m).userData,t=Object(a.useState)([]),n=Object(d.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)(!1),o=Object(d.a)(i,2),h=o[0],p=o[1];Object(a.useEffect)((function(){var t={headers:{"x-auth-token":e.token}};(function(){var e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(O,"/lifts"),t);case 2:200===(n=e.sent).status&&p(!0),r(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),void 0===e.token&&x.push("/login")}),[e]);var x=Object(b.f)(),f=Object(a.useState)(1),v=Object(d.a)(f,2),N=v[0],w=v[1],y=Object(a.useState)(5),C=Object(d.a)(y,1)[0],D=N*C,S=D-C,L=s.slice(S,D);return Object(c.jsx)("div",{className:"",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("h2",{children:"Lets get a good lift in!"}),Object(c.jsx)(j.b,{to:"/newLift",className:"btn btn-primary btn-med",children:"Add new Lift"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"jumbotron mx-0 pb-0",children:[Object(c.jsx)("div",{className:"display-4 ml-3",children:"Tracked lifts"}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"".concat(h?"":"collapsed"),children:Object(c.jsxs)("div",{className:"list-group container",children:[L.map((function(e){return Object(c.jsx)(j.b,{to:{pathname:"/lifts",liftId:e._id},className:"list-group-item bg-dark text-white list-group-item-action list-group-item-dark mt-2",style:{borderRadius:"5px",boxShadow:"2px 3px #888888"},children:e.liftname},e._id)})),Object(c.jsx)(g,{postsPerPage:C,totalPosts:s.length,paginate:function(e){return w(e)}})]})})]})]})})}var w=function(){var e=Object(a.useContext)(m).userData,t=Object(a.useState)(),n=Object(d.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)(),o=Object(d.a)(i,2),l=o[0],u=o[1],j=Object(b.f)(),h={liftdate:l,liftname:s};return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"container h-100",children:[Object(c.jsx)("h3",{children:"Add new lift..."}),Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"input-group mb-3",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("span",{className:"input-group-text",children:"Lift Name"})}),Object(c.jsx)("input",{placeholder:"Bench...",type:"text",className:"form-control",onChange:function(e){return r(e.target.value)}})]}),Object(c.jsxs)("div",{className:"input-group mb-3",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("span",{className:"input-group-text",children:"Date"})}),Object(c.jsx)("input",{type:"date",onChange:function(e){return u(e.target.value)}})]}),Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(t){return function(t){t.preventDefault();var n={headers:{"x-auth-token":e.token}};k.a.post("".concat(O,"/lifts/add"),h,n),j.push("/")}(t)},children:"Create new Lift"})]})]})})},y=n(19),C=n.n(y),D=n(75),S=function(e){var t=e.currentPosts,n=[],a=[];t.forEach((function(e){var t=C()(e.liftDate).format("MMM DD, YYYY");n.push(t),a.push(e.liftWeight)}));var s={labels:n,datasets:[{label:"Weight",data:a,borderColor:"black",borderWidth:2,backgroundColor:"rgba(16, 77, 162, 0.56)"}]};return t.length<1?Object(c.jsx)("div",{children:"No workouts found... yet... Add one and start tracking now!"}):Object(c.jsx)("div",{className:"chart-container",children:Object(c.jsx)(D.Line,{data:s,height:300,options:{scales:{xAxes:[{ticks:{fontSize:10}}],yAxes:[{ticks:{lineHeight:1.2,fontSize:12}}]},title:{display:!0,text:"Lift Progress Over Time",fontSize:25},legend:{display:!0,position:"bottom"},maintainAspectRatio:!1}})})},L=function(e){var t=e.open,n=e.onClose,a=e.workoutDetails,s=e.userData,r=e.currentLift,o=e.optimisticWorkoutRemoved,d=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k()({url:"".concat(O,"/workouts/delete/").concat(a._id),headers:{"x-auth-token":s.token},method:"delete",data:{liftId:r}});case 2:n(),o(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=C()(a.liftDate).format("MMM D, YYYY");return t?i.a.createPortal(Object(c.jsx)("div",{style:{position:"fixed",zIndex:60,left:0,top:0,right:0,bottom:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)"},className:"h-100 d-flex justify-content-center align-items-center",children:Object(c.jsxs)("div",{className:"card mx-3",tabIndex:"-1",children:[Object(c.jsxs)("div",{className:"card-header",children:["Delete Workout",Object(c.jsx)("button",{onClick:n,className:"close","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h5",{className:"card-title",children:"Are you sure you want to delete this Workout?"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("h6",{children:["Lift Date: ",j]}),Object(c.jsxs)("h6",{children:["Lift Weight: ",a.liftWeight]})]}),Object(c.jsxs)("div",{className:"text-center",children:[Object(c.jsx)("hr",{}),Object(c.jsx)("button",{onClick:n,type:"button",className:"mr-2 btn btn-secondary",children:"Cancel"}),Object(c.jsx)("button",{onClick:d,className:"ml-2 btn btn-danger",children:"Delete Workout"})]})]})]})}),document.querySelector("#modal")):null},W=function(e){var t=e.open,n=e.onClose,a=e.liftDetails,s=e.userData,r=Object(b.f)();return t?i.a.createPortal(Object(c.jsx)("div",{style:{position:"fixed",zIndex:60,left:0,top:0,right:0,bottom:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)"},className:"h-100 d-flex justify-content-center align-items-center",children:Object(c.jsxs)("div",{className:"card mx-3",tabIndex:"-1",children:[Object(c.jsxs)("div",{className:"card-header",children:["Edit Lift",Object(c.jsx)("button",{onClick:n,className:"close","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h5",{className:"card-title",children:"Do you want to Edit or Delete this Lift?"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"text-center",children:[Object(c.jsx)("button",{onClick:function(){k()({url:"".concat(O,"/lifts/delete/").concat(a._id),headers:{"x-auth-token":s.token},method:"delete"}),r.push("/")},className:"btn btn-danger",children:"Delete Lift"}),Object(c.jsx)(j.b,{to:{pathname:"/editlift",liftDetails:a},type:"button",className:"ml-3\r btn btn-dark",children:"Edit Lift"})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("button",{onClick:n,type:"button",className:"mr-2 btn btn-secondary",children:"Cancel"})]})]})}),document.querySelector("#modal")):null},I=function(e){var t=e.currentLift,n=e.userData,s=e.onOpen,r=e.onClose,i=e.confirmWorkoutAdded,o=e.optimisticWorkout,j=Object(a.useState)(""),b=Object(d.a)(j,2),h=b[0],p=b[1],x=Object(a.useState)(""),f=Object(d.a)(x,2),m=f[0],g=f[1],v=Object(a.useState)(""),N=Object(d.a)(v,2),w=N[0],y=N[1],C=Object(a.useState)(""),D=Object(d.a)(C,2),S=D[0],L=D[1],W=function(){var e=Object(u.a)(l.a.mark((function e(c){var a,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),a={liftDate:h,liftSets:m,liftReps:w,liftWeight:S},s={liftdate:h,liftsets:m,liftreps:w,liftweight:S},e.next=5,k()({url:"/".concat(t._id),method:"post",headers:{"x-auth-token":n.token},baseURL:"".concat(O,"/lifts/update/"),data:s});case 5:u=e.sent,o(a),r(),i(u.status);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s?Object(c.jsxs)("div",{className:"card bg-light border-dark mt-2",children:[Object(c.jsx)("button",{onClick:r,className:"close mt-3","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{className:"container",children:[Object(c.jsxs)("div",{className:"input-group mb-3 ",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("span",{className:"input-group-text",children:"Date"})}),Object(c.jsx)("input",{onChange:function(e){return p(e.target.value)},className:"form-control",name:"lift",type:"date"})]}),Object(c.jsxs)("div",{className:"input-group mb-3",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("span",{className:"input-group-text",children:"Sets"})}),Object(c.jsx)("input",{onChange:function(e){return g(e.target.value)},className:"form-control",name:"lift",type:"number"})]}),Object(c.jsxs)("div",{className:"input-group mb-3",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("span",{className:"input-group-text",children:"Reps"})}),Object(c.jsx)("input",{onChange:function(e){return y(e.target.value)},className:"form-control",type:"number"})]}),Object(c.jsxs)("div",{className:"input-group mb-3",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("span",{className:"input-group-text",children:"Weight"})}),Object(c.jsx)("input",{onChange:function(e){return L(e.target.value)},className:"form-control",type:"number"})]}),Object(c.jsx)("button",{onClick:function(e){return W(e)},className:"btn btn-primary",children:"+"})]})})]}):null},P=function(e){var t=e.currentPosts,n=e.openDeleteWorkoutModel,a=e.deleteableWorkout,s=e.deleteClicked;return t.length<1?null:Object(c.jsxs)("table",{className:"table table-sm table-borderless table-dark mb-2",style:{boxShadow:"2px 3px #666666",borderRadius:"5px"},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"Date"}),Object(c.jsx)("th",{scope:"col",children:"Weight"}),Object(c.jsx)("th",{scope:"col",children:"Sets"}),Object(c.jsx)("th",{scope:"col",children:"Reps"}),Object(c.jsx)("th",{scope:"col",children:"Change"})]})}),Object(c.jsx)("tbody",{children:function(e){return e.map((function(e,t){var r=C()(e.liftDate).format("MMM D, YYYY");return Object(c.jsxs)("tr",{style:{borderTop:"2px solid #888888"},children:[Object(c.jsx)("td",{children:r}),Object(c.jsx)("td",{children:e.liftWeight}),Object(c.jsx)("td",{children:e.liftSets}),Object(c.jsx)("td",{children:e.liftReps}),Object(c.jsx)("td",{children:e._id?Object(c.jsx)("button",{onClick:function(){return function(e){n(),s(),a(e)}(e)},className:"btn btn-outline-danger",children:"delete"}):Object(c.jsx)("div",{class:"spinner-border mx-3",role:"status",children:Object(c.jsx)("span",{class:"sr-only",children:"Loading..."})})})]},e._id)}))}(t)})]})};function z(){return Object(c.jsxs)("div",{style:{fontSize:".75rem",zIndex:1e3,width:"100%",marginTop:"auto"},className:"bg-dark text-white-50",children:[Object(c.jsxs)("div",{style:{paddingTop:"2px",paddingBottom:"2px"},className:"container my-1",children:[Object(c.jsx)("i",{children:"\u201cStrength does not come from winning. Your struggles develop your strengths. When you go through hardships and decide not to surrender, that is strength.\u201d"}),Object(c.jsx)("p",{className:"mb-0",children:"- Arnold Schwarzenegger"})]}),Object(c.jsx)("div",{style:{width:"100%",height:"40px",paddingTop:"10px",postion:"absolute",textAlign:"center",bottom:"0px",backgroundColor:"#3f484f"},children:Object(c.jsx)("a",{className:"pt-5 text-white-50",href:"http://www.oscarchavez.com",target:"_blank",rel:"noreferrer",children:"www.OscarChavez.com"})})]})}function A(e){var t=Object(a.useState)({}),n=Object(d.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)([]),o=Object(d.a)(i,2),j=o[0],h=o[1],p=Object(a.useContext)(m).userData,x=Object(a.useState)(!1),f=Object(d.a)(x,2),v=f[0],N=f[1],w=Object(a.useState)({}),y=Object(d.a)(w,2),C=y[0],D=y[1],z=Object(a.useState)(!1),A=Object(d.a)(z,2),E=A[0],M=A[1],Y=Object(a.useState)(!1),_=Object(d.a)(Y,2),R=_[0],T=_[1],q=Object(a.useState)(!1),B=Object(d.a)(q,2),H=B[0],U=B[1],V=Object(a.useState)(!1),G=Object(d.a)(V,2),J=(G[0],G[1]),F=Object(a.useState)(""),K=Object(d.a)(F,2),Q=K[0],X=K[1],Z=Object(b.f)(),$=Object(a.useState)(1),ee=Object(d.a)($,2),te=ee[0],ne=ee[1],ce=Object(a.useState)(5),ae=Object(d.a)(ce,1)[0],se=te*ae,re=se-ae,ie=j.slice(re,se);Object(a.useEffect)((function(){(function(){var t=Object(u.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.location.liftId,t.next=3,k()({url:"".concat(O,"/lifts/").concat(n),headers:{"x-auth-token":p.token}});case 3:c=t.sent,r(c.data);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()(),function(){var t=Object(u.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k()({baseURL:"".concat(O,"/workouts/").concat(e.location.liftId),headers:{"x-auth-token":p.token}});case 2:200===(n=t.sent).status&&X(!0),c=n.data.sort((function(e,t){return e.liftDate<t.liftDate?1:-1})),h(c);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),void 0===p.token&&Z.push("/login")}),[e.location.liftId,p.token,H]);return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(L,{open:v,onClose:function(){return N(!1)},workoutDetails:C,userData:p,currentLift:s._id,optimisticWorkoutRemoved:function(e){return function(e){var t=j.map((function(e){return e._id})).indexOf(e._id);j.splice(t,1),J(!0)}(e)}}),Object(c.jsx)(W,{open:E,onClose:function(){return M(!1)},liftDetails:s,userData:p}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("h3",{children:[s.liftname," - Lift Details "]}),Object(c.jsx)("button",{className:"btn btn-primary float-right",onClick:function(){return T(!0),void U(!1)},children:"Add workout"}),Object(c.jsxs)("button",{onClick:function(){return Z.push("/")},className:"btn btn-secondary ml-2 ",children:[Object(c.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-arrow-left-square-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsx)("path",{"fill-rule":"evenodd",d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm9.5 8.5a.5.5 0 0 0 0-1H5.707l2.147-2.146a.5.5 0 1 0-.708-.708l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708-.708L5.707 8.5H11.5z"})})," Back"]}),Object(c.jsx)("button",{onClick:function(){return M(!0)},className:"btn btn-dark mr-2 float-right",children:"Edit Lift"}),Object(c.jsx)("hr",{})]}),Object(c.jsx)("div",{children:Object(c.jsx)(I,{onOpen:R,onClose:function(){T(!1)},currentLift:s,userData:p,confirmWorkoutAdded:function(e){return function(e){200===e&&U(!0)}(e)},optimisticWorkout:function(e){return j.unshift(e)}})}),Object(c.jsxs)("div",{className:"jumbotron px-2 mb-0 pb-0",children:[Object(c.jsx)("h6",{className:"display-4 ml-4",children:"Workouts"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"".concat(Q?"":"collapsed"),children:[Object(c.jsx)("div",{className:"panel panel-default",children:Object(c.jsx)(P,{currentPosts:ie,deleteableWorkout:D,openDeleteWorkoutModel:function(){return N(!0)},deleteClicked:function(){return J(!1)}})}),Object(c.jsx)(g,{postsPerPage:ae,totalPosts:j.length,paginate:function(e){return ne(e)}}),Object(c.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:Object(c.jsx)(S,{currentPosts:ie,update:!0})})]})]})]})})}var E=function(e){var t=Object(a.useState)({}),n=Object(d.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)(""),o=Object(d.a)(i,2),l=o[0],u=o[1],j=Object(a.useContext)(m).userData,h=Object(b.f)();Object(a.useEffect)((function(){r(e.location.liftDetails)}),[e]);return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"card container",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h3",{children:"Edit Lift"}),Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"input-group mb-3",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("span",{className:"input-group-text",children:"Edit Lift Name"})}),Object(c.jsx)("input",{placeholder:s.liftname,type:"text",className:"form-control",onChange:function(e){return u(e.target.value)}})]}),Object(c.jsxs)("button",{onClick:function(){return h.push("/")},className:"btn btn-secondary mr-2 ",children:[Object(c.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-arrow-left-square-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsx)("path",{"fill-rule":"evenodd",d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm9.5 8.5a.5.5 0 0 0 0-1H5.707l2.147-2.146a.5.5 0 1 0-.708-.708l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708-.708L5.707 8.5H11.5z"})})," Go Back"]}),Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(e){return function(e){e.preventDefault();var t={headers:{"x-auth-token":j.token}};k.a.put("".concat(O,"/lifts/edit/").concat(s._id),{liftname:l},t),h.push("/")}(e)},children:"Confirm Edit"})]})]})})})},M=function(){var e=Object(b.f)(),t=Object(a.useContext)(m),n=t.userData,s=t.setUserData;return Object(c.jsx)("div",{className:"navbar navbar-dark bg-dark position-relative",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(j.b,{to:"/",className:"navbar-brand",children:Object(c.jsx)("u",{children:"Lift Tracker"})}),n.user?Object(c.jsx)("button",{onClick:function(){window.gapi.auth2.getAuthInstance().signOut(),s({token:void 0,user:void 0}),localStorage.setItem("auth-token",""),e.push("/login")},className:"btn btn-primary",children:"Sign Out"}):Object(c.jsx)("button",{onClick:function(){return e.push("/login")},className:"btn btn-primary",children:"Sign in"})]})})},Y=function(){var e=Object(b.f)(),t=Object(a.useContext)(m),n=t.userData,s=t.setUserData;Object(a.useEffect)((function(){window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"1077904608925-4tg6bgj0o85bntc1i68kt6crvpqgqa7v.apps.googleusercontent.com",scope:"profile email"})}))}),[]);var r=function(){var t=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=window.gapi.auth2.getAuthInstance()).signIn().then(Object(u.a)(l.a.mark((function t(){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.currentUser.get().getBasicProfile().getEmail();case 2:return t.t0=t.sent,t.next=5,n.currentUser.get().getId();case 5:return t.t1=t.sent,c={username:t.t0,password:t.t1},t.next=9,k.a.post("".concat(O,"/users/signin"),c).then((function(e){return s({token:e.data.token,user:e.data.user})})).catch((function(e){return console.log(e)}));case 9:e.push("/");case 10:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return void 0===n.token?Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"container h-100 mx-auto d-flex justify-content-center align-items-center",children:Object(c.jsx)("div",{className:"card text-center text-white bg-dark mx-auto",children:Object(c.jsxs)("div",{className:"card-body h-100 d-flex justify-content-center align-items-center",style:{flexDirection:"column"},children:[Object(c.jsx)("h1",{className:"card-title",children:"Welcome to LiftTracker!"}),Object(c.jsx)("h5",{children:"Create workouts and track your progress over time."}),Object(c.jsx)("p",{className:"card-text",children:"Sign in to start tracking your lifts!"}),Object(c.jsx)("button",{onClick:r,className:"btn btn-primary",style:{height:"4em"},children:"Sign-in or create an account with Google"})]})})})}):Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(){window.gapi.auth2.getAuthInstance().signOut().then((function(){s({token:void 0,user:void 0}),localStorage.setItem("auth-token","")})),e.push("/login")},className:"btn btn-primary",children:"Welcome "})})},_=n(200),R=n(199),T=function(){var e=Object(a.useState)({token:void 0,user:void 0}),t=Object(d.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,k.a.post("".concat(O,"/users/tokenIsValid"),null,{headers:{"x-auth-token":t}});case 4:e.sent.data&&(n=k.a.get("".concat(O,"/users/"),{headers:{"x-auth-token":t}}),s({token:t,user:n.data}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsx)(a.Fragment,{children:Object(c.jsx)(j.a,{children:Object(c.jsxs)(m.Provider,{value:{userData:n,setUserData:s},children:[Object(c.jsx)(M,{}),Object(c.jsx)("br",{}),Object(c.jsx)(b.a,{render:function(e){var t=e.location;return Object(c.jsx)(_.a,{className:"transition-div",children:Object(c.jsx)(R.a,{timeout:300,classNames:"fade",children:Object(c.jsxs)(b.c,{location:t,children:[Object(c.jsx)(b.a,{path:"/",exact:!0,component:N}),Object(c.jsx)(b.a,{path:"/login",component:Y}),Object(c.jsx)(b.a,{path:"/newlift",component:w}),Object(c.jsx)(b.a,{path:"/lifts",component:A}),Object(c.jsx)(b.a,{path:"/editlift",component:E})]})},t.key)})}}),Object(c.jsx)(f,{}),Object(c.jsx)(z,{})]})})})};i.a.render(Object(c.jsx)(T,{}),document.querySelector("#root"))}},[[197,1,2]]]);
//# sourceMappingURL=main.ff402060.chunk.js.map